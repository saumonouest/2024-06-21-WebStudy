<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.databoard-mapper">
<!--  
	<sql> : SQL 문장의 중복 제거
	<select id="" resultType="" parameterType="" resultMap="">
			===== ============= ================ ============
									? 에 값을 채운다	  컬럼명이 다른 경우
			구분자   결과값 (SQL=> 담는 변수)			  => 컬럼명 / VO의 변수명
	<resultMap id="" type=""BoardVO">
	 <result column="board_no" property="no"/>
	</resultMap> => JOIN => vo.getDvo().setName()
	컬럼명 : board_no board_name board_subject ...
	VO : no name subject
	SELECT no, name, subject...
	===========================
			setBoard_no()
			setNo(), setName(), setSubject()
	<insert id="" parameterType=""> = <selectKey> : 자동 증가 번호
	<update id="" parameterType="">
	<delete id="" parameterType="">
	= id는 중복이 되면 안 된다
	  ================= HTML/CSS = JavaScript:<jsp:include>
	  
	  #{} / ${} = 구분
	  
	  JOIN / SUBQuery
-->

<!-- 추가 -->
<insert id="databoardInsert" parameterType="DataBoardVO">
	INSERT INTO project_databoard VALUES(
	 (SELECT NVL(MAX(no)+1,1)FROM project_databoard),
	 #{name},#{subject},#{content},#{pwd},SYSDATE,0,
	 ${filename},#{filesize}
	)
</insert>
<!-- 목록 -->
<select id="databoardListData" parameterType="hashmap" resultType="DataBoardVO">
	SELECT no,subject,name,TO_CHAR(regdate,'YYYY-MM-DD') as dbday,hit,num
	FROM (SELECT no,subject,name,regdate,hit,rownum as num 
	FROM (SELECT /*+ INDEX_DESC(project_databoard pb_no_pk)*/no,subject,name,regdate,hit 
	FROM project_databoard))
	WHERE num BETWEEN #{start} AND #{end}
</select>
<select id="databoardRowCount" resultType="int">
	SELECT COUNT(*) FROM project_databoard
</select>
<!-- 상세보기 -->
<!-- 삭제 -->
<!-- 동적 쿼리 -->
</mapper>














